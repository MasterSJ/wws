<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="icon" href="/icon/favicon.ico">

    <title>何学 用户信息</title>

    <link href="/css/bootstrap.min.css" rel="stylesheet">
    <link href="/css/ie10-viewport-bug-workaround.css" rel="stylesheet">
    <link href="/css/dashboard.css" rel="stylesheet">
	<link href="/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
	<link href="/css/bootstrap-select.min.css" rel="stylesheet">

  </head>

  <body>

    <#include "/common_page/backTitle.txt">

    <div class="container-fluid">
      <div class="row">
        <#include "/common_page/backMenu.txt">
        <div class="col-sm-8 col-sm-offset-2 main">

          <h2 class="sub-header">个人信息</h2>
          <div class="table-responsive" id="showDiv">
			<ul class="list-group">
			    <li class="list-group-item">
			        <span>用户名：</span><span >${user.userName}</span>
			    </li>
                <li class="list-group-item">
                    <span>实名：</span><span >${user.realName}</span>
                </li>
                <li class="list-group-item">
                    <span>昵称：</span><span >${user.nikeName}</span>
                </li>
                <li class="list-group-item">
                    <span>邮箱：</span><span >${user.email}</span>
                </li>
			    <li class="list-group-item">
			        <!-- <span>手机：</span><span id="mobile">${user.mobile}</span>   -->
			        <span>手机：</span><span >${user.mobile}</span>
			    </li>
			    <li class="list-group-item">
			        <span>生日：</span><span >${user.birthday}</span>
			    </li>
			    <li class="list-group-item">
			        <span>简述：</span><span >${user.resume}</span>
			    </li>
			</ul>
          </div>
          
          <form role="form" id="editDiv" style="display:none">
			    <div class="form-group">
			        <label class="col-sm-1 control-label">用户名</label>
			        <span class="col-sm-5"><input type='text' class="form-control" value=${user.userName} readonly="readonly"></span>
			    </div>
                <div class="form-group">
	                <label class="col-sm-1 control-label">实名</label>
				    <span class="col-sm-5"><input type='text' id="realName" class="form-control" value=${user.realName}></span>
                </div>
                <div class="form-group">
                    <label class="col-sm-1 control-label">昵称</label>
                    <span class="col-sm-5"><input type='text' id="nikeName" class="form-control" value=${user.nikeName}></span>
                </div>
                <div class="form-group">
                    <label class="col-sm-1 control-label">邮箱</label>
                    <span class="col-sm-5"><input type='text' id="email" class="form-control" value=${user.email}></span>
                </div>
			    <div class="form-group">
			        <label class="col-sm-1 control-label">手机</label>
			        <span class="col-sm-5"><input type='text' id="mobile" class="form-control" value=${user.mobile}></span>
			    </div>
			    <div class="form-group">
			        <label class="col-sm-1 control-label">生日</label>
			        <span class="col-sm-5"><input type='text' id="birthday" class="form-control form_date" value=${user.birthday}></span>
			    </div>
			    <div class="form-group">
			        <label class="col-sm-1 control-label">简述</label>
			        <span class="col-sm-11"><textarea id="resume" class="form-control" rows=3>${user.resume}</textarea></span>
			    </div>
          </form>
          <input type="button" id="editPage" class="btn btn-primary" value="修改"/>
        </div>
        
        
      </div>
    </div>

    <script src="/js/jquery.min.js"></script>
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/ie10-viewport-bug-workaround.js"></script>
    <script src="/js/ie-emulation-modes-warning.js"></script>
    <script src="/js/common-js.js"></script>
	<script src="/js/bootstrap-datetimepicker.min.js"></script>
	<script src="/js/bootstrap-datetimepicker.zh-CN.js"></script>
	<script src="/js/bootstrap-select.min.js"></script>
  </body>
  
  <script type="text/javascript">
  $("#userInfoLi").addClass("active");
  $(".form_date").datetimepicker({
	  language: 'zh-CN',
	  format: 'yyyy-mm-dd',
	  todayHighlight: 1,//今天高亮
	  minView: "month",//设置只显示到月份
	  startView:2,
	  forceParse: 0,
	  showMeridian: 1,
	  autoclose: 1//选择后自动关闭
  });
  
  
    $("#editPage").click(function(){
        if($("#editPage").val() == "修改"){
	        $("#showDiv").hide();
	        $("#editDiv").show();
	        $("#editPage").parent().append("<input type='button' id='submitEdit' class='btn btn-primary' onClick='submitEdit()' value='提交'/>");
	        $("#editPage").val("取消");
        } else {
        	$("#showDiv").show();
        	$("#editDiv").hide();
        	$("#submitEdit").remove();
        	$("#editPage").val("修改");
        }
    });
    
    function submitEdit(){
        $.ajax({
            url:'editInfo',
            type:'POST', //GET
            async:true,    //或false,是否异步
            data:{
                realName:$("#realName").val(),
                nikeName:$("#nikeName").val(),
                email:$("#email").val(),
                mobile:$("#mobile").val(),
                birthday:$("#birthday").val(),
                resume:$("#resume").val()
            },
            timeout:5000,    //超时时间
            dataType:'json',    //返回的数据格式：json/xml/html/script/jsonp/text
            success:function(data,textStatus){
                if (data.retCode == 1) {
                    window.location.reload();
                } else {
                    showTip(data.retMessage);
                }
            },
            error:function(data,textStatus){
            	showTip(textStatus+data);
            }
        });
    }
  </script>
</html>
